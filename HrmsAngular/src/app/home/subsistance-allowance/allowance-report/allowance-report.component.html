<div class="card section">
  <h4 class="card-header text-center bg-light">
    Subsistence Allowance Report
  </h4>
  <div class="container">
    <br />
    <form [formGroup]="reportForm">
      <div class="row">
        <div class="col-md-6 center">
          <!--Report Type-->
          <div class="form-group row">
            <label class="col-form-label col-sm-3">Report Type</label>
            <div class="col-sm-9">
              <ng-select formControlName="ReportId" [items]="reportType" bindLabel="TypeName" bindValue="ReportId"
                [ngClass]="{'is-invalid':(reportForm.controls.ReportId.invalid && (reportForm.controls.ReportId.touched || reportForm.controls.ReportId.dirty || isSubmit))}"
                placeholder="Select report Type">
              </ng-select>
              <div class="text-danger"
                *ngIf="(reportForm.controls['ReportId'].invalid && (reportForm.controls['ReportId'].touched || reportForm.controls['ReportId'].dirty || isSubmit))">
                <i *ngIf="reportForm.controls['ReportId'].errors.required">Report type is required</i>
              </div>
            </div>
          </div>
          <div *ngIf="[91,92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Period</label>
            <div class="col-sm-9">
              <app-period-select-list (onChange)="onSelectPeriod($event.id)"></app-period-select-list>
            </div>
          </div>
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Branch</label>
            <div class="col-sm-9">
              <app-branch-select-list (onChange)="formControl['BranchID'].setValue($event.id)"></app-branch-select-list>
            </div>
          </div>
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Department</label>
            <div class="col-sm-9">
              <app-department-select-list (onChange)="formControl['DepartmentID'].setValue($event.id)"></app-department-select-list>
            </div>
          </div>
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Project</label>
            <div class="col-sm-9">
              <app-project-select-list (onChange)="formControl['ProjectID'].setValue($event.id)"></app-project-select-list>
            </div>
          </div>
          <!-- Employee -->
          <div *ngIf="[91,92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Employee</label>
            <div class="col-sm-9">
              <app-employee-select-list (onChange)="formControl['EmpCode'].setValue($event.empCode)"></app-employee-select-list>
            </div>
          </div>
          <!--Pay By-->
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="Payby" class="col-form-label col-sm-3">Pay By</label>
            <div class="col-sm-9">
              <ng-select formControlName="Payby" [items]="payMethod" bindLabel="Id" bindValue="Name"
                 placeholder="Select Pay Type">
              </ng-select>
            </div>
          </div>
          <!-- Bank -->
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="PeriodID" class="col-form-label col-sm-3">Bank</label>
            <div class="col-sm-9">
              <app-bank-select-list (onChange)="formControl['BankID'].setValue($event.id)"></app-bank-select-list>
            </div>
          </div>
          <!--Signatory Left-->
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="SignatoryL" class="col-form-label col-sm-3">Signatory Left</label>
            <div class="col-sm-9">
              <app-signatory-select-list (onChange)="formControl['SignatoryL'].setValue($event.description)"></app-signatory-select-list>
            </div>
          </div>
          <!--Signatory Right-->
          <div *ngIf="[92].includes(formControl['ReportId'].value)" class="form-group row">
            <label for="SignatoryR" class="col-form-label col-sm-3">Signatory Right</label>
            <div class="col-sm-9">
              <app-signatory-select-list (onChange)="formControl['SignatoryR'].setValue($event.description)"></app-signatory-select-list>
            </div>
          </div>

          <div class="row">
            <div class="demo-inline-spacing mt-3" style="margin:0 auto">
              <button [ladda]="exportingPdf" (click)="exportToPdf('pdf')" type="submit" class="btn btn-info">
                <span class="fas fa-file-download"></span> Generate Report </button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>